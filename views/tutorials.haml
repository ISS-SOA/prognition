
%form{role: 'form', :action => '/tutorials', :method => 'post', :id => 'check-form'}
  %div{class:'row'}
    %div{class:'col-md-6'}

    %div{class:'col-md-6'}

  %div{class:'row'}
    %div{class:'col-md-6'}
      %label{:for => 'check-usernames'} Usernames
      %br
      - if @usernames
        = find_and_preserve do
          %textarea{class:'form-control', :id => 'check-usernames', :name => 'usernames', :rows => '10', :cols => '35', placeholder: 'Enter one username per line'}
            #{@usernames.join("\r\n")}
      - else
        %textarea{class:'form-control', :id => 'check-usernames', :name => 'usernames', :rows => '10', :cols => '35', placeholder: 'Enter one username per line'}
    %div{class:'col-md-6'}
      %label{:for => 'check-badges'} Badges names
      %br
      - if @usernames
        = find_and_preserve do
          %textarea{class:'form-control', :id => 'check-badges', :name => 'badges', :rows => '10', :cols => '35', placeholder: 'Enter badges to check, one per line'}
            #{@badges.join("\r\n")}
      - else
        %textarea{class:'form-control', :id => 'check-badges', :name => 'badges', :rows => '10', :cols => '35', placeholder: 'Enter badges to check, one per line'}
  %div{class:'row', style:'margin-top: 1cm'}
    %div{class:'col-md-12'}
      %button{type:'submit', class: 'btn btn-default', :value => 'submit', :id => 'check-submit'}
        %span{class: 'glyphicon glyphicon-search'}
        Search
%form{role: 'form', action: "/tutorials/#{@id}", :method => 'post', :id => 'delete-form'}
  - if @action == :update
    %button{type: 'submit', class: 'btn btn-default', :name => '_method', :value => 'delete'}
      %span{class: 'glyphicon glyphicon-remove'}
      Delete these results
- if @results
  %table{class: 'table'}
    %thead
      %tr
        %th Username
        %th Badges Missing
    %tbody
      - @results.each do |user, missing|
        %tr
          %td
            %span{class: 'lead'} #{user}
            %br
            - if missing.count > 0
              %span{class: 'small bg-danger', style: 'bg-danger'} #{missing.count} missing
            - else
              %span{class: 'small'} none missing
          %td
            = missing.join ", "
